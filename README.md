# Система управления проектами - Инструкция по деплою

## Обзор

Этот проект представляет собой систему управления проектами, разработанную на Flask. Для деплоя используется Docker и Docker Compose, что обеспечивает простоту установки и запуска на любом сервере.

## Структура Docker-контейнеров

Проект состоит из трех основных контейнеров:
1. **web** - Flask-приложение
2. **db** - PostgreSQL база данных
3. **nginx** - Веб-сервер для обработки запросов и статических файлов

## Требования для деплоя

- Ubuntu 22.04
- Docker
- Docker Compose

## Быстрый старт

1. Клонируйте репозиторий на ваш сервер
2. Настройте переменные окружения в файле `.env`
3. Запустите приложение с помощью Docker Compose:

```bash
docker-compose up -d
```

4. Приложение будет доступно по адресу http://ваш_сервер

## Подробная инструкция по деплою

Подробная инструкция по деплою находится в файле [deploy.md](deploy.md).

## Настройка переменных окружения

Перед запуском приложения необходимо настроить переменные окружения в файле `.env`. В репозитории предоставлен файл `.env.example` как шаблон. Скопируйте его и переименуйте в `.env`, затем настройте под свои нужды:

```
# Настройки базы данных
POSTGRES_DB=project_management
POSTGRES_USER=your_db_username
POSTGRES_PASSWORD=your_db_password
POSTGRES_ADMIN_PASSWORD=your_admin_password

# Настройки Flask
FLASK_ENV=production
SECRET_KEY=your_secret_key_here

# Настройки администратора
ADMIN_PASSWORD=your_admin_password

# Настройки сервера
APP_PORT=5000
NGINX_PORT=80
```

## Безопасное управление конфиденциальными данными

Файл `.env` содержит конфиденциальные данные и не должен публиковаться в репозитории. Для этого:

1. Файл `.env` добавлен в `.gitignore` и не будет отправлен в репозиторий
2. Используйте файл `.env.example` как шаблон без реальных паролей
3. При деплое на сервер, создайте файл `.env` вручную или используйте систему управления секретами

## Учетные данные по умолчанию

После первого запуска будет создан пользователь-администратор со следующими учетными данными:
- Логин: admin
- Пароль: значение из переменной окружения ADMIN_PASSWORD (по умолчанию admin123)

## Резервное копирование

Для создания резервной копии базы данных выполните:

```bash
docker-compose exec db pg_dump -U ${POSTGRES_USER} -d ${POSTGRES_DB} > backup.sql
```

## Обновление приложения

Для обновления приложения:

```bash
docker-compose down
docker-compose up -d --build
```

## Мониторинг

Для просмотра логов приложения:

```bash
docker-compose logs -f web
```