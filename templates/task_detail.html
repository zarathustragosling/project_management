{% extends 'base.html' %}
{% block title %}Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°: {{ task.title }}{% endblock %}

{% block content %}

<div class="hidden">
  <div class="w-10 h-10 rounded-full object-cover"></div>
  <div class="text-sm text-xs text-white text-gray-400 text-blue-400"></div>
  <div class="hover:underline hover:text-blue-400"></div>
  <div class="bg-slate-800 bg-slate-700 bg-gray-800 bg-gray-900"></div>
  <div class="p-4 rounded-lg mt-2 mb-4 space-y-4"></div>
  <div class="ml-10 ml-6 border-l border-slate-600 pl-4"></div>
  <div class="flex items-start gap-3"></div>
  <button class="btn btn-sm reply-btn"></button>
</div>





<div class="max-w-5xl mx-auto space-y-10 px-4 pt-8">
  <!-- Task Header -->
  <div class="space-y-4">
    <h1 class="text-3xl font-bold tracking-tight text-white">{{ task.title }}</h1>
    <p class="text-slate-400 text-base">{{ task.description or "ĞĞµÑ‚ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ" }}</p>

    <div class="grid grid-cols-2 md:grid-cols-3 gap-4 text-sm text-slate-300">
      <p><strong class="text-white">ğŸ“ ĞŸÑ€Ğ¾ĞµĞºÑ‚:</strong> <a href="{{ url_for('project_detail', project_id=task.project.id) }}" class="text-blue-400 hover:underline">{{ task.project.name }}</a></p>
      <p><strong class="text-white">ğŸ”¥ ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚:</strong> {{ task.priority }}</p>
      <p><strong class="text-white">ğŸ“Œ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:</strong> {{ task.status.value }}</p>
      <p><strong class="text-white">ğŸ•“ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¾:</strong> {{ task.created_at.strftime('%d.%m.%Y %H:%M') }}</p>
      <p><strong class="text-white">â³ Ğ”ĞµĞ´Ğ»Ğ°Ğ¹Ğ½:</strong> {{ task.deadline.strftime('%d.%m.%Y') if task.deadline else "ĞĞµ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½" }}</p>
      <p><strong class="text-white">ğŸ‘¤ ĞÑ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹:</strong> {{ task.assigned_user.username if task.assigned_user else "ĞĞµ Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½" }}</p>
      <p><strong class="text-white">ğŸ›  ĞŸĞ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ñ‰Ğ¸Ğº:</strong> {{ task.creator.username }}</p>
    </div>

    {% if current_user.id == task.created_by %}
    <a href="{{ url_for('edit_task', task_id=task.id) }}" class="btn mt-4">âœï¸ Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</a>
    {% endif %}
  </div>

  <!-- Comments -->
  <div class="space-y-6">
    
    <h2 class="text-2xl font-semibold text-white">ğŸ’¬ ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¸</h2>

    <div id="comments-list" class="space-y-4">
      {% for comment in task.comments if not comment.parent_id %}
        {% include "_comment_block.html" with context %}
      {% endfor %}
    </div>
    

    <div class="mt-6">
      <h3 class="text-lg font-semibold mb-2 text-white">ğŸ“ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹</h3>
      <form id="commentForm" method="POST"
            action="{{ url_for('add_comment', task_id=task.id) }}"
            enctype="multipart/form-data"
            class="space-y-4 bg-slate-800 p-4 rounded-lg">
        <input type="hidden" name="parent_id" id="parent_id" value="">
        <textarea name="content" id="commentContent" rows="3" required
                  class="w-full p-3 rounded bg-gray-900 text-white border border-gray-700 focus:border-blue-400"
                  placeholder="Ğ’Ğ°Ñˆ ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹..."></textarea>
        <input type="file" name="attachment" class="block text-white text-sm" />
        <button type="submit" class="btn">ğŸ’¬ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ</button>
      </form>
    </div>
  </div>
  
</div>


{% endblock %}
