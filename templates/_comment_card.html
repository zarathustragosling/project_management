<div class="flex items-start gap-3 mb-4 comment-box" data-parent-id="{{ comment.parent_id }}">
  <img src="{{ comment.author.avatar or url_for('static', filename='default_avatar.png') }}"
       class="w-10 h-10 rounded-full object-cover" alt="avatar">

  <div class="bg-gray-800 p-4 rounded-lg w-full">
    <div class="flex items-center gap-2 mb-1" data-comment-id="{{ comment.id }}">

      <a href="{{ url_for('user_profile', user_id=comment.author.id) }}"
         class="text-sm font-semibold text-white hover:text-blue-400 transition">
         {{ comment.author.username }}
      </a>
      <span class="text-xs text-gray-400">
        {{ comment.created_at.strftime('%d.%m.%Y %H:%M') }}
      </span>
    </div>

    <!-- Текст комментария -->
    <p class="text-sm text-white whitespace-pre-wrap comment-content">
      {{ comment.content|safe }}
    </p>

    {% if comment.attachments %}
    <div class="mt-2">
      {% for attachment in comment.attachments %}
        <a href="{{ url_for('static', filename=attachment.filepath) }}"
           class="text-blue-400 hover:underline text-sm block">
          📁 {{ attachment.filename }}
        </a>
      {% endfor %}
    </div>
    {% endif %}

    {% if comment.parent_id is none %}
    <button class="reply-btn text-xs mt-2 text-blue-400 hover:underline"
            data-username="{{ comment.author.username }}"
            data-userid="{{ comment.author.id }}"
            data-commentid="{{ comment.id }}">
      Ответить
    </button>
  {% endif %}
  

  </div>
</div>
