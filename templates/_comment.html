<div class="flex items-start gap-3 mb-4 comment-box"
     data-parent-id="{{ comment.parent_id }}"
     data-is-reply="{{ 1 if comment.parent_id else 0 }}">


  <img src="{{ comment.author.avatar or url_for('static', filename='default_avatar.png') }}"
       class="w-10 h-10 rounded-full object-cover" alt="avatar">

  <div class="bg-gray-800 p-4 rounded-lg w-full">
    <div class="flex items-center gap-2">
      <a href="{{ url_for('user_profile', user_id=comment.author.id) }}"
         class="text-sm font-bold text-white hover:underline">
         {{ comment.author.username }}
      </a>
      <span class="text-xs text-gray-400">
        {{ comment.created_at.strftime('%d.%m.%Y %H:%M') }}
      </span>
    </div>

    <div class="mt-1 text-white text-sm">
      {{ comment.content | highlight_mentions | safe }}
    </div>

    {% if comment.attachments %}
      <div class="mt-2">
        {% for attachment in comment.attachments %}
          <a href="{{ url_for('static', filename=attachment.filepath) }}"
             class="text-blue-400 hover:underline text-sm block">
            ðŸ“Ž {{ attachment.filename }}
          </a>
        {% endfor %}
      </div>
    {% endif %}

    {% if not parent %}
  <button type="button"
          class="reply-btn text-xs text-blue-400 mt-2"
          data-username="{{ comment.author.username }}"
          data-userid="{{ comment.author.id }}"
          data-commentid="{{ comment.id }}">
    ÐžÑ‚Ð²ÐµÑ‚Ð¸Ñ‚ÑŒ
  </button>
{% endif %}


    {% if comment.replies %}
      <div class="ml-10 mt-4 space-y-4">
        {% for reply in comment.replies %}
  {% include "comment.html" with context %}
{% set parent = true %}
{% endfor %}

      

      </div>
    {% endif %}
  </div>
</div>
